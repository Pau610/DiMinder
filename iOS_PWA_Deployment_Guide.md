# iOS PWA 部署指南 - 我的日記糖尿病管理应用

## 概述
本指南将帮助您将"我的日記"糖尿病管理应用部署为iOS Progressive Web App (PWA)，使其能够像原生应用一样安装和使用。

## 前提条件
- iOS 11.3 或更高版本
- Safari 浏览器
- 稳定的网络连接

## iOS PWA 特性

### ✅ 已配置的功能
1. **完整的图标支持**
   - 57x57 到 180x180 像素的苹果触摸图标
   - 高分辨率显示支持
   - 遮罩图标支持

2. **iOS 元标签优化**
   - `apple-mobile-web-app-capable`: 启用全屏模式
   - `apple-mobile-web-app-status-bar-style`: 状态栏样式
   - `apple-mobile-web-app-title`: 应用标题
   - `viewport-fit=cover`: 支持iPhone X系列的刘海屏

3. **启动画面支持**
   - iPhone 11/12/13/14 系列适配
   - iPhone X/XS/XR 系列适配
   - iPhone 6/7/8 系列适配

4. **应用快捷方式**
   - 快速记录血糖
   - 快速记录胰岛素
   - 快速记录饮食
   - 查看每日摘要

## 安装步骤

### 1. 访问应用
在 Safari 浏览器中打开应用URL

### 2. 添加到主屏幕
1. 点击 Safari 底部的"分享"按钮 📤
2. 向下滚动找到"添加到主屏幕"选项
3. 点击"添加到主屏幕"
4. 确认应用名称："我的日記"
5. 点击"添加"

### 3. 启动应用
- 应用图标将出现在iOS主屏幕上
- 点击图标即可启动，体验类似原生应用
- 应用将在全屏模式下运行，无浏览器界面

## iOS PWA 优势

### 🔋 性能优化
- **离线功能**: 完全离线工作，无需网络连接
- **数据缓存**: 本地存储所有健康数据
- **快速启动**: 即时加载，无网络延迟
- **后台同步**: Service Worker 支持数据同步

### 📱 原生体验
- **全屏显示**: 无浏览器地址栏和控件
- **手势支持**: 支持iOS原生手势操作
- **推送通知**: 支持医疗提醒（如需要）
- **触觉反馈**: 支持设备震动反馈

### 🔒 安全特性
- **本地存储**: 数据完全存储在设备本地
- **隐私保护**: 无外部服务器同步
- **HTTPS加密**: 安全的数据传输
- **Touch ID集成**: 可配置生物识别认证

## 技术规格

### 支持的iOS设备
- **iPhone**: iPhone 6及更新机型
- **iPad**: iPad Air及更新机型
- **iPod Touch**: 第6代及更新机型

### 屏幕适配
- **iPhone 14 Pro Max**: 1284x2778
- **iPhone 14 Pro**: 1170x2532
- **iPhone 11/XR**: 414x896
- **iPhone X/XS**: 375x812
- **iPad Pro**: 2048x2732

## 故障排除

### 常见问题

#### 1. 无法添加到主屏幕
**解决方案**:
- 确保使用Safari浏览器（Chrome不支持iOS PWA）
- 检查是否开启了JavaScript
- 确认网络连接稳定

#### 2. 图标显示不正确
**解决方案**:
- 清除Safari缓存：设置 > Safari > 清除历史记录与网站数据
- 重新添加到主屏幕
- 确保图标文件可访问

#### 3. 离线功能不工作
**解决方案**:
- 首次访问时确保网络连接良好
- 让应用完全加载后再断开网络测试
- 检查Service Worker注册状态

#### 4. 数据丢失
**解决方案**:
- 数据存储在浏览器localStorage中
- 不要清除Safari数据和历史记录
- 定期使用"复制摘要"功能备份重要数据

## 更新机制

### 自动更新
- PWA会自动检测服务器更新
- 用户重新打开应用时自动下载新版本
- 无需重新安装，保持数据完整性

### 手动更新
如需强制更新：
1. 从主屏幕删除应用
2. 重新访问网站
3. 重新添加到主屏幕

## 备份建议

### 每日摘要备份
1. 打开应用
2. 选择要备份的日期
3. 点击"📋 复制"按钮
4. 将复制的内容粘贴到备忘录或其他应用

### 数据导出
应用支持CSV格式数据导出：
- 血糖记录
- 胰岛素注射记录
- 饮食记录
- 统计分析数据

## 联系支持

如遇到技术问题或需要帮助：
1. 检查iOS版本是否为11.3+
2. 确认Safari浏览器为最新版本
3. 尝试重启设备后重新安装
4. 联系技术支持获得帮助

---

**注意**: 本应用为医疗辅助工具，请在医生指导下使用。重要的医疗决策应咨询专业医疗人员。